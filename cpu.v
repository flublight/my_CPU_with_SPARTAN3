/*
 -- ============================================================================
 -- FILE NAME	: cpu.v
 -- DESCRIPTION : CPU??ｽg??ｽb??ｽv??ｽ??ｽ??ｽW??ｽ??ｽ??ｽ[??ｽ??ｽ
 -- ----------------------------------------------------------------------------
 -- Revision  Date		  Coding_by	 Comment
 -- 1.0.0	  2011/06/27  suito		 ??ｽV??ｽK??ｽ??ｽ
 -- ============================================================================
*/

/*
alu_op:16
ctrl_op:3
mem_op:3
isa_io:0x1b
isa_exp:7
*/

`define WORD 32  // 1word
`define WORD_ADDR_W 30  // address width 1word

`define GPR_ADDR_MSB 5-1

`define WORD_MSB `WORD-1
`define WORD_ADDR_MSB `WORD_ADDR_W-1

`define RegAddrBus `GPR_ADDR_MSB:0
`define WordAddrBus `WORD_ADDR_MSB:0
`define WordDataBus `WORD_MSB:0
/********** ??ｽ??ｽ??ｽW??ｽ??ｽ??ｽ[??ｽ??ｽ **********/
module CPU_top (
	/********** ??ｽN??ｽ??ｽ??ｽb??ｽN & ??ｽ??ｽ??ｽZ??ｽb??ｽg **********/
	input  wire					  clk,			   // ??ｽN??ｽ??ｽ??ｽb??ｽN
	input  wire					  clk_,			   // ??ｽ??ｽ??ｽ]??ｽN??ｽ??ｽ??ｽb??ｽN
	input  wire					  reset,		   // ??ｽ同奇ｿｽ??ｽ??ｽ??ｽZ??ｽb??ｽg
	/********** ??ｽo??ｽX??ｽC??ｽ??ｽ??ｽ^??ｽt??ｽF??ｽ[??ｽX **********/
	// IF Stage
	input  wire [`WordDataBus]	  if_bus_rd_data,  // ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^
	input  wire					  if_bus_rdy_,	   // ??ｽ??ｽ??ｽf??ｽB
	input  wire					  if_bus_grnt_,	   // ??ｽo??ｽX??ｽO??ｽ??ｽ??ｽ??ｽ??ｽg
	output wire					  if_bus_req_,	   // ??ｽo??ｽX??ｽ??ｽ??ｽN??ｽG??ｽX??ｽg
	output wire [`WordAddrBus]	  if_bus_addr,	   // ??ｽA??ｽh??ｽ??ｽ??ｽX
	output wire					  if_bus_as_,	   // ??ｽA??ｽh??ｽ??ｽ??ｽX??ｽX??ｽg??ｽ??ｽ??ｽ[??ｽu
	output wire					  if_bus_rw,	   // ??ｽﾇみ／??ｽ??ｽ??ｽ??ｽ
	output wire [`WordDataBus]	  if_bus_wr_data,  // ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
	// MEM Stage
	input  wire [`WordDataBus]	  mem_bus_rd_data, // ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^
	input  wire					  mem_bus_rdy_,	   // ??ｽ??ｽ??ｽf??ｽB
	input  wire					  mem_bus_grnt_,   // ??ｽo??ｽX??ｽO??ｽ??ｽ??ｽ??ｽ??ｽg
	output wire					  mem_bus_req_,	   // ??ｽo??ｽX??ｽ??ｽ??ｽN??ｽG??ｽX??ｽg
	output wire [`WordAddrBus]	  mem_bus_addr,	   // ??ｽA??ｽh??ｽ??ｽ??ｽX
	output wire					  mem_bus_as_,	   // ??ｽA??ｽh??ｽ??ｽ??ｽX??ｽX??ｽg??ｽ??ｽ??ｽ[??ｽu
	output wire					  mem_bus_rw,	   // ??ｽﾇみ／??ｽ??ｽ??ｽ??ｽ
	output wire [`WordDataBus]	  mem_bus_wr_data, // ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
	/********** ??ｽ??ｽ??ｽ闕橸ｿｽ??ｽ **********/
	input  wire [7:0] cpu_irq		   // ??ｽ??ｽ??ｽ闕橸ｿｽﾝ要??ｽ??ｽ
);

	/********** ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽW??ｽX??ｽ^ **********/
	// IF/ID
	wire [`WordAddrBus]			 if_pc;			 // ??ｽv??ｽ??ｽ??ｽO??ｽ??ｽ??ｽ??ｽ??ｽJ??ｽE??ｽ??ｽ??ｽ^
	wire [`WordDataBus]			 if_insn;		 // ??ｽ??ｽ??ｽ??ｽ
	wire						 if_en;			 // ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽf??ｽ[??ｽ^??ｽﾌ有??ｽ??ｽ
	// ID/EX??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽW??ｽX??ｽ^
	wire [`WordAddrBus]			 id_pc;			 // ??ｽv??ｽ??ｽ??ｽO??ｽ??ｽ??ｽ??ｽ??ｽJ??ｽE??ｽ??ｽ??ｽ^
	wire						 id_en;			 // ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽf??ｽ[??ｽ^??ｽﾌ有??ｽ??ｽ
	wire [3:0]			 id_alu_op;		 // ALU??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
	wire [`WordDataBus]			 id_alu_in_0;	 // ALU??ｽ??ｽ??ｽ??ｽ 0
	wire [`WordDataBus]			 id_alu_in_1;	 // ALU??ｽ??ｽ??ｽ??ｽ 1
	wire						 id_br_flag;	 // ??ｽ??ｽ??ｽ??ｽ??ｽt??ｽ??ｽ??ｽO
	wire [1:0]			 id_mem_op;		 // ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
	wire [`WordDataBus]			 id_mem_wr_data; // ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
	wire [1:0]			 id_ctrl_op;	 // ??ｽ??ｽ??ｽ??ｽ??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
	wire [`RegAddrBus]			 id_dst_addr;	 // GPR??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝア??ｽh??ｽ??ｽ??ｽX
	wire						 id_gpr_we_;	 // GPR??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝ有??ｽ??ｽ
	wire [2:0]			 id_exp_code;	 // ??ｽ??ｽ??ｽO??ｽR??ｽ[??ｽh
	// EX/MEM??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽW??ｽX??ｽ^
	wire [`WordAddrBus]			 ex_pc;			 // ??ｽv??ｽ??ｽ??ｽO??ｽ??ｽ??ｽ??ｽ??ｽJ??ｽE??ｽ??ｽ??ｽ^
	wire						 ex_en;			 // ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽf??ｽ[??ｽ^??ｽﾌ有??ｽ??ｽ
	wire						 ex_br_flag;	 // ??ｽ??ｽ??ｽ??ｽ??ｽt??ｽ??ｽ??ｽO
	wire [1:0]			 ex_mem_op;		 // ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
	wire [`WordDataBus]			 ex_mem_wr_data; // ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
	wire [1:0]			 ex_ctrl_op;	 // ??ｽ??ｽ??ｽ艫鯉ｿｽW??ｽX??ｽ^??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
	wire [`RegAddrBus]			 ex_dst_addr;	 // ??ｽﾄ用??ｽ??ｽ??ｽW??ｽX??ｽ^??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝア??ｽh??ｽ??ｽ??ｽX
	wire						 ex_gpr_we_;	 // ??ｽﾄ用??ｽ??ｽ??ｽW??ｽX??ｽ^??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝ有??ｽ??ｽ
	wire [2:0]			 ex_exp_code;	 // ??ｽ??ｽ??ｽO??ｽR??ｽ[??ｽh
	wire [`WordDataBus]			 ex_out;		 // ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ
	// MEM/WB??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽW??ｽX??ｽ^
	wire [`WordAddrBus]			 mem_pc;		 // ??ｽv??ｽ??ｽ??ｽO??ｽ??ｽ??ｽ??ｽ??ｽJ??ｽE??ｽ??ｽ??ｽ^
	wire						 mem_en;		 // ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽf??ｽ[??ｽ^??ｽﾌ有??ｽ??ｽ
	wire						 mem_br_flag;	 // ??ｽ??ｽ??ｽ??ｽ??ｽt??ｽ??ｽ??ｽO
	wire [1:0]			 mem_ctrl_op;	 // ??ｽ??ｽ??ｽ艫鯉ｿｽW??ｽX??ｽ^??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
	wire [4:0]			 mem_dst_addr;	 // ??ｽﾄ用??ｽ??ｽ??ｽW??ｽX??ｽ^??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝア??ｽh??ｽ??ｽ??ｽX
	wire						 mem_gpr_we_;	 // ??ｽﾄ用??ｽ??ｽ??ｽW??ｽX??ｽ^??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝ有??ｽ??ｽ
	wire [2:0]			 mem_exp_code;	 // ??ｽ??ｽ??ｽO??ｽR??ｽ[??ｽh
	wire [`WordDataBus]			 mem_out;		 // ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ
	/********** ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽM??ｽ??ｽ **********/
	// ??ｽX??ｽg??ｽ[??ｽ??ｽ??ｽM??ｽ??ｽ
	wire						 if_stall;		 // IF??ｽX??ｽe??ｽ[??ｽW
	wire						 id_stall;		 // ID??ｽX??ｽe??ｽ[
	wire						 ex_stall;		 // EX??ｽX??ｽe??ｽ[??ｽW
	wire						 mem_stall;		 // MEM??ｽX??ｽe??ｽ[??ｽW
	// ??ｽt??ｽ??ｽ??ｽb??ｽV??ｽ??ｽ??ｽM??ｽ??ｽ
	wire						 if_flush;		 // IF??ｽX??ｽe??ｽ[??ｽW
	wire						 id_flush;		 // ID??ｽX??ｽe??ｽ[??ｽW
	wire						 ex_flush;		 // EX??ｽX??ｽe??ｽ[??ｽW
	wire						 mem_flush;		 // MEM??ｽX??ｽe??ｽ[??ｽW
	// ??ｽr??ｽW??ｽ[??ｽM??ｽ??ｽ
	wire						 if_busy;		 // IF??ｽX??ｽe??ｽ[??ｽW
	wire						 mem_busy;		 // MEM??ｽX??ｽe??ｽ[??ｽW
	// ??ｽ??ｽ??ｽﾌ托ｿｽ??ｽﾌ撰ｿｽ??ｽ??ｽ??ｽM??ｽ??ｽ
	wire [`WordAddrBus]			 new_pc;		 // ??ｽV??ｽ??ｽ??ｽ??ｽPC
	wire [`WordAddrBus]			 br_addr;		 // ??ｽ??ｽ??ｽ??ｽ??ｽA??ｽh??ｽ??ｽ??ｽX
	wire						 br_taken;		 // ??ｽ??ｽ??ｽ??ｽ??ｽﾌ撰ｿｽ??ｽ??ｽ
	wire						 ld_hazard;		 // ??ｽ??ｽ??ｽ[??ｽh??ｽn??ｽU??ｽ[??ｽh
	/********** ??ｽﾄ用??ｽ??ｽ??ｽW??ｽX??ｽ^??ｽM??ｽ??ｽ **********/
	wire [`WordDataBus]			 gpr_rd_data_0;	 // ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^ 0
	wire [`WordDataBus]			 gpr_rd_data_1;	 // ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^ 1
	wire [`RegAddrBus]			 gpr_rd_addr_0;	 // ??ｽﾇみ出??ｽ??ｽ??ｽA??ｽh??ｽ??ｽ??ｽX 0
	wire [`RegAddrBus]			 gpr_rd_addr_1;	 // ??ｽﾇみ出??ｽ??ｽ??ｽA??ｽh??ｽ??ｽ??ｽX 1
	/********** ??ｽ??ｽ??ｽ艫鯉ｿｽW??ｽX??ｽ^??ｽM??ｽ??ｽ **********/
	wire [0:0]		 exe_mode;		 // ??ｽ??ｽ??ｽs??ｽ??ｽ??ｽ[??ｽh
	wire [`WordDataBus]			 creg_rd_data;	 // ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^
	wire [`RegAddrBus]			 creg_rd_addr;	 // ??ｽﾇみ出??ｽ??ｽ??ｽA??ｽh??ｽ??ｽ??ｽX
	/********** Interrupt Request **********/
	wire						 int_detect;	  // ??ｽ??ｽ??ｽ闕橸ｿｽﾝ鯉ｿｽ??ｽo
	/********** ??ｽX??ｽN??ｽ??ｽ??ｽb??ｽ`??ｽp??ｽb??ｽh??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽM??ｽ??ｽ **********/
	// IF??ｽX??ｽe??ｽ[??ｽW
	wire [`WordDataBus]			 if_spm_rd_data;  // ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^
	wire [`WordAddrBus]			 if_spm_addr;	  // ??ｽA??ｽh??ｽ??ｽ??ｽX
	wire						 if_spm_as_;	  // ??ｽA??ｽh??ｽ??ｽ??ｽX??ｽX??ｽg??ｽ??ｽ??ｽ[??ｽu
	wire						 if_spm_rw;		  // ??ｽﾇみ／??ｽ??ｽ??ｽ??ｽ
	wire [`WordDataBus]			 if_spm_wr_data;  // ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
	// MEM??ｽX??ｽe??ｽ[??ｽW
	wire [`WordDataBus]			 mem_spm_rd_data; // ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^
	wire [`WordAddrBus]			 mem_spm_addr;	  // ??ｽA??ｽh??ｽ??ｽ??ｽX
	wire						 mem_spm_as_;	  // ??ｽA??ｽh??ｽ??ｽ??ｽX??ｽX??ｽg??ｽ??ｽ??ｽ[??ｽu
	wire						 mem_spm_rw;	  // ??ｽﾇみ／??ｽ??ｽ??ｽ??ｽ
	wire [`WordDataBus]			 mem_spm_wr_data; // ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
	/********** ??ｽt??ｽH??ｽ??ｽ??ｽ[??ｽf??ｽB??ｽ??ｽ??ｽO??ｽM??ｽ??ｽ **********/
	wire [`WordDataBus]			 ex_fwd_data;	  // EX??ｽX??ｽe??ｽ[??ｽW
	wire [`WordDataBus]			 mem_fwd_data;	  // MEM??ｽX??ｽe??ｽ[??ｽW

	/********** IF??ｽX??ｽe??ｽ[??ｽW **********/
	stage_IF if_stage (
		/********** ??ｽN??ｽ??ｽ??ｽb??ｽN & ??ｽ??ｽ??ｽZ??ｽb??ｽg **********/
		.clk			(clk),				// ??ｽN??ｽ??ｽ??ｽb??ｽN
		.reset			(reset),			// ??ｽ同奇ｿｽ??ｽ??ｽ??ｽZ??ｽb??ｽg
		/********** SPM??ｽC??ｽ??ｽ??ｽ^??ｽt??ｽF??ｽ[??ｽX **********/
		.spm_rd_data	(if_spm_rd_data),	// ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^
		.spm_addr		(if_spm_addr),		// ??ｽA??ｽh??ｽ??ｽ??ｽX
		.spm_as_		(if_spm_as_),		// ??ｽA??ｽh??ｽ??ｽ??ｽX??ｽX??ｽg??ｽ??ｽ??ｽ[??ｽu
		.spm_rw			(if_spm_rw),		// ??ｽﾇみ／??ｽ??ｽ??ｽ??ｽ
		.spm_wr_data	(if_spm_wr_data),	// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
		/********** ??ｽo??ｽX??ｽC??ｽ??ｽ??ｽ^??ｽt??ｽF??ｽ[??ｽX **********/
		.bus_rd_data	(if_bus_rd_data),	// ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^
		.bus_rdy_		(if_bus_rdy_),		// ??ｽ??ｽ??ｽf??ｽB
		.bus_grnt_		(if_bus_grnt_),		// ??ｽo??ｽX??ｽO??ｽ??ｽ??ｽ??ｽ??ｽg
		.bus_req_		(if_bus_req_),		// ??ｽo??ｽX??ｽ??ｽ??ｽN??ｽG??ｽX??ｽg
		.bus_addr		(if_bus_addr),		// ??ｽA??ｽh??ｽ??ｽ??ｽX
		.bus_as_		(if_bus_as_),		// ??ｽA??ｽh??ｽ??ｽ??ｽX??ｽX??ｽg??ｽ??ｽ??ｽ[??ｽu
		.bus_rw			(if_bus_rw),		// ??ｽﾇみ／??ｽ??ｽ??ｽ??ｽ
		.bus_wr_data	(if_bus_wr_data),	// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
		/********** ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽM??ｽ??ｽ **********/
		.stall			(if_stall),			// ??ｽX??ｽg??ｽ[??ｽ??ｽ
		.flush			(if_flush),			// ??ｽt??ｽ??ｽ??ｽb??ｽV??ｽ??ｽ
		.new_pc			(new_pc),			// ??ｽV??ｽ??ｽ??ｽ??ｽPC
		.br_taken		(br_taken),			// ??ｽ??ｽ??ｽ??ｽ??ｽﾌ撰ｿｽ??ｽ??ｽ
		.br_addr		(br_addr),			// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽA??ｽh??ｽ??ｽ??ｽX
		.busy			(if_busy),			// ??ｽr??ｽW??ｽ[??ｽM??ｽ??ｽ
		/********** IF/ID??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽW??ｽX??ｽ^ **********/
		.if_pc			(if_pc),			// ??ｽv??ｽ??ｽ??ｽO??ｽ??ｽ??ｽ??ｽ??ｽJ??ｽE??ｽ??ｽ??ｽ^
		.if_insn		(if_insn),			// ??ｽ??ｽ??ｽ??ｽ
		.if_en			(if_en)				// ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽf??ｽ[??ｽ^??ｽﾌ有??ｽ??ｽ
	);

	/********** ID??ｽX??ｽe??ｽ[??ｽW **********/
	stage_ID id_stage (
		/********** ??ｽN??ｽ??ｽ??ｽb??ｽN & ??ｽ??ｽ??ｽZ??ｽb??ｽg **********/
		.clk			(clk),				// ??ｽN??ｽ??ｽ??ｽb??ｽN
		.reset			(reset),			// ??ｽ同奇ｿｽ??ｽ??ｽ??ｽZ??ｽb??ｽg
		/********** GPR??ｽC??ｽ??ｽ??ｽ^??ｽt??ｽF??ｽ[??ｽX **********/
		.gpr_rd_data_0	(gpr_rd_data_0),	// ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^ 0
		.gpr_rd_data_1	(gpr_rd_data_1),	// ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^ 1
		.gpr_rd_addr_0	(gpr_rd_addr_0),	// ??ｽﾇみ出??ｽ??ｽ??ｽA??ｽh??ｽ??ｽ??ｽX 0
		.gpr_rd_addr_1	(gpr_rd_addr_1),	// ??ｽﾇみ出??ｽ??ｽ??ｽA??ｽh??ｽ??ｽ??ｽX 1
		/********** ??ｽt??ｽH??ｽ??ｽ??ｽ[??ｽf??ｽB??ｽ??ｽ??ｽO **********/
		// EX??ｽX??ｽe??ｽ[??ｽW??ｽ??ｽ??ｽ??ｽ??ｽﾌフ??ｽH??ｽ??ｽ??ｽ[??ｽf??ｽB??ｽ??ｽ??ｽO
		.ex_en			(ex_en),			// ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽf??ｽ[??ｽ^??ｽﾌ有??ｽ??ｽ
		.ex_fwd_data	(ex_fwd_data),		// ??ｽt??ｽH??ｽ??ｽ??ｽ[??ｽf??ｽB??ｽ??ｽ??ｽO??ｽf??ｽ[??ｽ^
		.ex_dst_addr	(ex_dst_addr),		// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝア??ｽh??ｽ??ｽ??ｽX
		.ex_gpr_we_		(ex_gpr_we_),		// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝ有??ｽ??ｽ
		// MEM??ｽX??ｽe??ｽ[??ｽW??ｽ??ｽ??ｽ??ｽ??ｽﾌフ??ｽH??ｽ??ｽ??ｽ[??ｽf??ｽB??ｽ??ｽ??ｽO
		.mem_fwd_data	(mem_fwd_data),		// ??ｽt??ｽH??ｽ??ｽ??ｽ[??ｽf??ｽB??ｽ??ｽ??ｽO??ｽf??ｽ[??ｽ^
		/********** ??ｽ??ｽ??ｽ艫鯉ｿｽW??ｽX??ｽ^??ｽC??ｽ??ｽ??ｽ^??ｽt??ｽF??ｽ[??ｽX **********/
		.exe_mode		(exe_mode),			// ??ｽ??ｽ??ｽs??ｽ??ｽ??ｽ[??ｽh
		.creg_rd_data	(creg_rd_data),		// ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^
		.creg_rd_addr	(creg_rd_addr),		// ??ｽﾇみ出??ｽ??ｽ??ｽA??ｽh??ｽ??ｽ??ｽX
		/********** ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽM??ｽ??ｽ **********/
	   .stall		   (id_stall),		   // ??ｽX??ｽg??ｽ[??ｽ??ｽ
		.flush			(id_flush),			// ??ｽt??ｽ??ｽ??ｽb??ｽV??ｽ??ｽ
		.br_addr		(br_addr),			// ??ｽ??ｽ??ｽ??ｽ??ｽA??ｽh??ｽ??ｽ??ｽX
		.br_taken		(br_taken),			// ??ｽ??ｽ??ｽ??ｽ??ｽﾌ撰ｿｽ??ｽ??ｽ
		.ld_hazard		(ld_hazard),		// ??ｽ??ｽ??ｽ[??ｽh??ｽn??ｽU??ｽ[??ｽh
		/********** IF/ID??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽW??ｽX??ｽ^ **********/
		.if_pc			(if_pc),			// ??ｽv??ｽ??ｽ??ｽO??ｽ??ｽ??ｽ??ｽ??ｽJ??ｽE??ｽ??ｽ??ｽ^
		.if_insn		(if_insn),			// ??ｽ??ｽ??ｽ??ｽ
		.if_en			(if_en),			// ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽf??ｽ[??ｽ^??ｽﾌ有??ｽ??ｽ
		/********** ID/EX??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽW??ｽX??ｽ^ **********/
		.id_pc			(id_pc),			// ??ｽv??ｽ??ｽ??ｽO??ｽ??ｽ??ｽ??ｽ??ｽJ??ｽE??ｽ??ｽ??ｽ^
		.id_en			(id_en),			// ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽf??ｽ[??ｽ^??ｽﾌ有??ｽ??ｽ
		.id_alu_op		(id_alu_op),		// ALU??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
		.id_alu_in_0	(id_alu_in_0),		// ALU??ｽ??ｽ??ｽ??ｽ 0
		.id_alu_in_1	(id_alu_in_1),		// ALU??ｽ??ｽ??ｽ??ｽ 1
		.id_br_flag		(id_br_flag),		// ??ｽ??ｽ??ｽ??ｽ??ｽt??ｽ??ｽ??ｽO
		.id_mem_op		(id_mem_op),		// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
		.id_mem_wr_data (id_mem_wr_data),	// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
		.id_ctrl_op		(id_ctrl_op),		// ??ｽ??ｽ??ｽ??ｽ??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
		.id_dst_addr	(id_dst_addr),		// GPR??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝア??ｽh??ｽ??ｽ??ｽX
		.id_gpr_we_		(id_gpr_we_),		// GPR??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝ有??ｽ??ｽ
		.id_exp_code	(id_exp_code)		// ??ｽ??ｽ??ｽO??ｽR??ｽ[??ｽh
	);

	/********** EX??ｽX??ｽe??ｽ[??ｽW **********/
	stage_EX ex_stage (
		/********** ??ｽN??ｽ??ｽ??ｽb??ｽN & ??ｽ??ｽ??ｽZ??ｽb??ｽg **********/
		.clk			(clk),				// ??ｽN??ｽ??ｽ??ｽb??ｽN
		.reset			(reset),			// ??ｽ同奇ｿｽ??ｽ??ｽ??ｽZ??ｽb??ｽg
		/********** ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽM??ｽ??ｽ **********/
		.stall			(ex_stall),			// ??ｽX??ｽg??ｽ[??ｽ??ｽ
		.flush			(ex_flush),			// ??ｽt??ｽ??ｽ??ｽb??ｽV??ｽ??ｽ
		.int_detect		(int_detect),		// ??ｽ??ｽ??ｽ闕橸ｿｽﾝ鯉ｿｽ??ｽo
		/********** ??ｽt??ｽH??ｽ??ｽ??ｽ[??ｽf??ｽB??ｽ??ｽ??ｽO **********/
		.fwd_data		(ex_fwd_data),		// ??ｽt??ｽH??ｽ??ｽ??ｽ[??ｽf??ｽB??ｽ??ｽ??ｽO??ｽf??ｽ[??ｽ^
		/********** ID/EX??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽW??ｽX??ｽ^ **********/
		.id_pc			(id_pc),			// ??ｽv??ｽ??ｽ??ｽO??ｽ??ｽ??ｽ??ｽ??ｽJ??ｽE??ｽ??ｽ??ｽ^
		.id_en			(id_en),			// ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽf??ｽ[??ｽ^??ｽﾌ有??ｽ??ｽ
		.id_alu_op		(id_alu_op),		// ALU??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
		.id_alu_in_0	(id_alu_in_0),		// ALU??ｽ??ｽ??ｽ??ｽ 0
		.id_alu_in_1	(id_alu_in_1),		// ALU??ｽ??ｽ??ｽ??ｽ 1
		.id_br_flag		(id_br_flag),		// ??ｽ??ｽ??ｽ??ｽ??ｽt??ｽ??ｽ??ｽO
		.id_mem_op		(id_mem_op),		// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
		.id_mem_wr_data (id_mem_wr_data),	// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
		.id_ctrl_op		(id_ctrl_op),		// ??ｽ??ｽ??ｽ艫鯉ｿｽW??ｽX??ｽ^??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
		.id_dst_addr	(id_dst_addr),		// ??ｽﾄ用??ｽ??ｽ??ｽW??ｽX??ｽ^??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝア??ｽh??ｽ??ｽ??ｽX
		.id_gpr_we_		(id_gpr_we_),		// ??ｽﾄ用??ｽ??ｽ??ｽW??ｽX??ｽ^??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝ有??ｽ??ｽ
		.id_exp_code	(id_exp_code),		// ??ｽ??ｽ??ｽO??ｽR??ｽ[??ｽh
		/********** EX/MEM??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽW??ｽX??ｽ^ **********/
		.ex_pc			(ex_pc),			// ??ｽv??ｽ??ｽ??ｽO??ｽ??ｽ??ｽ??ｽ??ｽJ??ｽE??ｽ??ｽ??ｽ^
		.ex_en			(ex_en),			// ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽf??ｽ[??ｽ^??ｽﾌ有??ｽ??ｽ
		.ex_br_flag		(ex_br_flag),		// ??ｽ??ｽ??ｽ??ｽ??ｽt??ｽ??ｽ??ｽO
		.ex_mem_op		(ex_mem_op),		// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
		.ex_mem_wr_data (ex_mem_wr_data),	// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
		.ex_ctrl_op		(ex_ctrl_op),		// ??ｽ??ｽ??ｽ艫鯉ｿｽW??ｽX??ｽ^??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
		.ex_dst_addr	(ex_dst_addr),		// ??ｽﾄ用??ｽ??ｽ??ｽW??ｽX??ｽ^??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝア??ｽh??ｽ??ｽ??ｽX
		.ex_gpr_we_		(ex_gpr_we_),		// ??ｽﾄ用??ｽ??ｽ??ｽW??ｽX??ｽ^??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝ有??ｽ??ｽ
		.ex_exp_code	(ex_exp_code),		// ??ｽ??ｽ??ｽO??ｽR??ｽ[??ｽh
		.ex_out			(ex_out)			// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ
	);

	/********** MEM??ｽX??ｽe??ｽ[??ｽW **********/
	stage_MEM mem_stage (
		/********** ??ｽN??ｽ??ｽ??ｽb??ｽN & ??ｽ??ｽ??ｽZ??ｽb??ｽg **********/
		.clk			(clk),				// ??ｽN??ｽ??ｽ??ｽb??ｽN
		.reset			(reset),			// ??ｽ同奇ｿｽ??ｽ??ｽ??ｽZ??ｽb??ｽg
		/********** ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽM??ｽ??ｽ **********/
		.stall			(mem_stall),		// ??ｽX??ｽg??ｽ[??ｽ??ｽ
		.flush			(mem_flush),		// ??ｽt??ｽ??ｽ??ｽb??ｽV??ｽ??ｽ
		.busy			(mem_busy),			// ??ｽr??ｽW??ｽ[??ｽM??ｽ??ｽ
		/********** ??ｽt??ｽH??ｽ??ｽ??ｽ[??ｽf??ｽB??ｽ??ｽ??ｽO **********/
		.fwd_data		(mem_fwd_data),		// ??ｽt??ｽH??ｽ??ｽ??ｽ[??ｽf??ｽB??ｽ??ｽ??ｽO??ｽf??ｽ[??ｽ^
		/********** SPM??ｽC??ｽ??ｽ??ｽ^??ｽt??ｽF??ｽ[??ｽX **********/
		.spm_rd_data	(mem_spm_rd_data),	// ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^
		.spm_addr		(mem_spm_addr),		// ??ｽA??ｽh??ｽ??ｽ??ｽX
		.spm_as_		(mem_spm_as_),		// ??ｽA??ｽh??ｽ??ｽ??ｽX??ｽX??ｽg??ｽ??ｽ??ｽ[??ｽu
		.spm_rw			(mem_spm_rw),		// ??ｽﾇみ／??ｽ??ｽ??ｽ??ｽ
		.spm_wr_data	(mem_spm_wr_data),	// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
		/********** ??ｽo??ｽX??ｽC??ｽ??ｽ??ｽ^??ｽt??ｽF??ｽ[??ｽX **********/
		.bus_rd_data	(mem_bus_rd_data),	// ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^
		.bus_rdy_		(mem_bus_rdy_),		// ??ｽ??ｽ??ｽf??ｽB
		.bus_grnt_		(mem_bus_grnt_),	// ??ｽo??ｽX??ｽO??ｽ??ｽ??ｽ??ｽ??ｽg
		.bus_req_		(mem_bus_req_),		// ??ｽo??ｽX??ｽ??ｽ??ｽN??ｽG??ｽX??ｽg
		.bus_addr		(mem_bus_addr),		// ??ｽA??ｽh??ｽ??ｽ??ｽX
		.bus_as_		(mem_bus_as_),		// ??ｽA??ｽh??ｽ??ｽ??ｽX??ｽX??ｽg??ｽ??ｽ??ｽ[??ｽu
		.bus_rw			(mem_bus_rw),		// ??ｽﾇみ／??ｽ??ｽ??ｽ??ｽ
		.bus_wr_data	(mem_bus_wr_data),	// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
		/********** EX/MEM??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽW??ｽX??ｽ^ **********/
		.ex_pc			(ex_pc),			// ??ｽv??ｽ??ｽ??ｽO??ｽ??ｽ??ｽ??ｽ??ｽJ??ｽE??ｽ??ｽ??ｽ^
		.ex_en			(ex_en),			// ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽf??ｽ[??ｽ^??ｽﾌ有??ｽ??ｽ
		.ex_br_flag		(ex_br_flag),		// ??ｽ??ｽ??ｽ??ｽ??ｽt??ｽ??ｽ??ｽO
		.ex_mem_op		(ex_mem_op),		// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
		.ex_mem_wr_data (ex_mem_wr_data),	// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
		.ex_ctrl_op		(ex_ctrl_op),		// ??ｽ??ｽ??ｽ艫鯉ｿｽW??ｽX??ｽ^??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
		.ex_dst_addr	(ex_dst_addr),		// ??ｽﾄ用??ｽ??ｽ??ｽW??ｽX??ｽ^??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝア??ｽh??ｽ??ｽ??ｽX
		.ex_gpr_we_		(ex_gpr_we_),		// ??ｽﾄ用??ｽ??ｽ??ｽW??ｽX??ｽ^??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝ有??ｽ??ｽ
		.ex_exp_code	(ex_exp_code),		// ??ｽ??ｽ??ｽO??ｽR??ｽ[??ｽh
		.ex_out			(ex_out),			// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ
		/********** MEM/WB??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽW??ｽX??ｽ^ **********/
		.mem_pc			(mem_pc),			// ??ｽv??ｽ??ｽ??ｽO??ｽ??ｽ??ｽ??ｽ??ｽJ??ｽE??ｽ??ｽ??ｽ^
		.mem_en			(mem_en),			// ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽf??ｽ[??ｽ^??ｽﾌ有??ｽ??ｽ
		.mem_br_flag	(mem_br_flag),		// ??ｽ??ｽ??ｽ??ｽ??ｽt??ｽ??ｽ??ｽO
		.mem_ctrl_op	(mem_ctrl_op),		// ??ｽ??ｽ??ｽ艫鯉ｿｽW??ｽX??ｽ^??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
		.mem_dst_addr	(mem_dst_addr),		// ??ｽﾄ用??ｽ??ｽ??ｽW??ｽX??ｽ^??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝア??ｽh??ｽ??ｽ??ｽX
		.mem_gpr_we_	(mem_gpr_we_),		// ??ｽﾄ用??ｽ??ｽ??ｽW??ｽX??ｽ^??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝ有??ｽ??ｽ
		.mem_exp_code	(mem_exp_code),		// ??ｽ??ｽ??ｽO??ｽR??ｽ[??ｽh
		.mem_out		(mem_out)			// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ
	);

	/********** ??ｽ??ｽ??ｽ?ｽ?ｽ??ｽ?ｽj??ｽb??ｽg **********/
	ctrl_cpu ctrl (
		/********** ??ｽN??ｽ??ｽ??ｽb??ｽN & ??ｽ??ｽ??ｽZ??ｽb??ｽg **********/
		.clk			(clk),				// ??ｽN??ｽ??ｽ??ｽb??ｽN
		.rst			(reset),			// ??ｽ同奇ｿｽ??ｽ??ｽ??ｽZ??ｽb??ｽg
		/********** ??ｽ??ｽ??ｽ艫鯉ｿｽW??ｽX??ｽ^??ｽC??ｽ??ｽ??ｽ^??ｽt??ｽF??ｽ[??ｽX **********/
		.creg_rd_addr	(creg_rd_addr),		// ??ｽﾇみ出??ｽ??ｽ??ｽA??ｽh??ｽ??ｽ??ｽX
		.creg_rd_data	(creg_rd_data),		// ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^
		.exe_mode		(exe_mode),			// ??ｽ??ｽ??ｽs??ｽ??ｽ??ｽ[??ｽh
		/********** ??ｽ??ｽ??ｽ闕橸ｿｽ??ｽ **********/
		.irq			(cpu_irq),			// ??ｽ??ｽ??ｽ闕橸ｿｽﾝ要??ｽ??ｽ
		.int_detect		(int_detect),		// ??ｽ??ｽ??ｽ闕橸ｿｽﾝ鯉ｿｽ??ｽo
		/********** ID/EX??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽW??ｽX??ｽ^ **********/
		.id_pc			(id_pc),			// ??ｽv??ｽ??ｽ??ｽO??ｽ??ｽ??ｽ??ｽ??ｽJ??ｽE??ｽ??ｽ??ｽ^
		/********** MEM/WB??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽW??ｽX??ｽ^ **********/
		.mem_pc			(mem_pc),			// ??ｽv??ｽ??ｽ??ｽO??ｽ??ｽ??ｽ??ｽ??ｽJ??ｽE??ｽ??ｽ??ｽ^
		.mem_en			(mem_en),			// ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽf??ｽ[??ｽ^??ｽﾌ有??ｽ??ｽ
		.mem_br_flag	(mem_br_flag),		// ??ｽ??ｽ??ｽ??ｽ??ｽt??ｽ??ｽ??ｽO
		.mem_ctrl_op	(mem_ctrl_op),		// ??ｽ??ｽ??ｽ艫鯉ｿｽW??ｽX??ｽ^??ｽI??ｽy??ｽ??ｽ??ｽ[??ｽV??ｽ??ｽ??ｽ??ｽ
		.mem_dst_addr	(mem_dst_addr),		// ??ｽﾄ用??ｽ??ｽ??ｽW??ｽX??ｽ^??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝア??ｽh??ｽ??ｽ??ｽX
		.mem_exp_code	(mem_exp_code),		// ??ｽ??ｽ??ｽO??ｽR??ｽ[??ｽh
		.mem_out		(mem_out),			// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ
		/********** ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽM??ｽ??ｽ **********/
		// ??ｽp??ｽC??ｽv??ｽ??ｽ??ｽC??ｽ??ｽ??ｽﾌ擾ｿｽ??ｽ??ｽ
		.if_busy		(if_busy),			// IF??ｽX??ｽe??ｽ[??ｽW??ｽr??ｽW??ｽ[
		.ld_hazard		(ld_hazard),		// Load??ｽn??ｽU??ｽ[??ｽh
		.mem_busy		(mem_busy),			// MEM??ｽX??ｽe??ｽ[??ｽW??ｽr??ｽW??ｽ[
		// ??ｽX??ｽg??ｽ[??ｽ??ｽ??ｽM??ｽ??ｽ
		.if_stall		(if_stall),			// IF??ｽX??ｽe??ｽ[??ｽW??ｽX??ｽg??ｽ[??ｽ??ｽ
		.id_stall		(id_stall),			// ID??ｽX??ｽe??ｽ[??ｽW??ｽX??ｽg??ｽ[??ｽ??ｽ
		.ex_stall		(ex_stall),			// EX??ｽX??ｽe??ｽ[??ｽW??ｽX??ｽg??ｽ[??ｽ??ｽ
		.mem_stall		(mem_stall),		// MEM??ｽX??ｽe??ｽ[??ｽW??ｽX??ｽg??ｽ[??ｽ??ｽ
		// ??ｽt??ｽ??ｽ??ｽb??ｽV??ｽ??ｽ??ｽM??ｽ??ｽ
		.if_flush		(if_flush),			// IF??ｽX??ｽe??ｽ[??ｽW??ｽt??ｽ??ｽ??ｽb??ｽV??ｽ??ｽ
		.id_flush		(id_flush),			// ID??ｽX??ｽe??ｽ[??ｽW??ｽt??ｽ??ｽ??ｽb??ｽV??ｽ??ｽ
		.ex_flush		(ex_flush),			// EX??ｽX??ｽe??ｽ[??ｽW??ｽt??ｽ??ｽ??ｽb??ｽV??ｽ??ｽ
		.mem_flush		(mem_flush),		// MEM??ｽX??ｽe??ｽ[??ｽW??ｽt??ｽ??ｽ??ｽb??ｽV??ｽ??ｽ
		// ??ｽV??ｽ??ｽ??ｽ??ｽ??ｽv??ｽ??ｽ??ｽO??ｽ??ｽ??ｽ??ｽ??ｽJ??ｽE??ｽ??ｽ??ｽ^
		.new_pc			(new_pc)			// ??ｽV??ｽ??ｽ??ｽ??ｽ??ｽv??ｽ??ｽ??ｽO??ｽ??ｽ??ｽ??ｽ??ｽJ??ｽE??ｽ??ｽ??ｽ^
	);

	/********** ??ｽﾄ用??ｽ??ｽ??ｽW??ｽX??ｽ^ **********/
	GPregistor gpr (
		/********** ??ｽN??ｽ??ｽ??ｽb??ｽN & ??ｽ??ｽ??ｽZ??ｽb??ｽg **********/
		.clk	   (clk),					// ??ｽN??ｽ??ｽ??ｽb??ｽN
		.rst	   (reset),					// ??ｽ同奇ｿｽ??ｽ??ｽ??ｽZ??ｽb??ｽg
		/********** ??ｽﾇみ出??ｽ??ｽ??ｽ|??ｽ[??ｽg 0 **********/
		.rd_addr_0 (gpr_rd_addr_0),			// ??ｽﾇみ出??ｽ??ｽ??ｽA??ｽh??ｽ??ｽ??ｽX
		.rd_data_0 (gpr_rd_data_0),			// ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^
		/********** ??ｽﾇみ出??ｽ??ｽ??ｽ|??ｽ[??ｽg 1 **********/
		.rd_addr_1 (gpr_rd_addr_1),			// ??ｽﾇみ出??ｽ??ｽ??ｽA??ｽh??ｽ??ｽ??ｽX
		.rd_data_1 (gpr_rd_data_1),			// ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^
		/********** ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝポ??ｽ[??ｽg **********/
		.we	   (mem_gpr_we_),			// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝ有??ｽ??ｽ
		.wr_addr   (mem_dst_addr),			// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝア??ｽh??ｽ??ｽ??ｽX
		.wr_data   (mem_out)				// ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
	);

	/********** ??ｽX??ｽN??ｽ??ｽ??ｽb??ｽ`??ｽp??ｽb??ｽh??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ **********/
	spm spm (
		/********** ??ｽN??ｽ??ｽ??ｽb??ｽN **********/
		.clk			 (clk_),					  // ??ｽN??ｽ??ｽ??ｽb??ｽN
		/********** ??ｽ|??ｽ[??ｽgA : IF??ｽX??ｽe??ｽ[??ｽW **********/
		.if_addr	 (if_spm_addr[11:0]),  // ??ｽA??ｽh??ｽ??ｽ??ｽX
		.if_as		 (if_spm_as_),				  // ??ｽA??ｽh??ｽ??ｽ??ｽX??ｽX??ｽg??ｽ??ｽ??ｽ[??ｽu
		.if_rw		 (if_spm_rw),				  // ??ｽﾇみ／??ｽ??ｽ??ｽ??ｽ
		.if_wr_data	 (if_spm_wr_data),			  // ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
		.if_rd_data	 (if_spm_rd_data),			  // ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^
		/********** ??ｽ|??ｽ[??ｽgB : MEM??ｽX??ｽe??ｽ[??ｽW **********/
		.mem_addr	 (mem_spm_addr[11:0]), // ??ｽA??ｽh??ｽ??ｽ??ｽX
		.mem_as	 (mem_spm_as_),				  // ??ｽA??ｽh??ｽ??ｽ??ｽX??ｽX??ｽg??ｽ??ｽ??ｽ[??ｽu
		.mem_rw		 (mem_spm_rw),				  // ??ｽﾇみ／??ｽ??ｽ??ｽ??ｽ
		.mem_wr_data (mem_spm_wr_data),			  // ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽ??ｽﾝデ??ｽ[??ｽ^
		.mem_rd_data (mem_spm_rd_data)			  // ??ｽﾇみ出??ｽ??ｽ??ｽf??ｽ[??ｽ^
	);

endmodule
